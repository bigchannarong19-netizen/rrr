<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TCAS Practice</title>
    <style>
         :root {
            --pink: #f472b6;
            --blue: #60a5fa;
            --bg: linear-gradient(135deg, var(--pink) 0%, var(--blue) 100%);
            --card-bg: #ffffff;
            --text: #1f2937;
        }
        
        body {
            font-family: "Segoe UI", sans-serif;
            margin: 0;
            min-height: 100vh;
            background: var(--bg);
            display: flex;
            flex-direction: column;
        }
        
        header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(6px);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.8rem 1.5rem;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        .logo {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--text);
        }
        
        nav a {
            margin-left: 1rem;
            text-decoration: none;
            color: var(--text);
            font-weight: 500;
            transition: color 0.2s;
        }
        
        nav a:hover {
            color: var(--blue);
        }
        
        main {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }
        
        .card {
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
            width: 100%;
            max-width: 700px;
            animation: fadeIn 0.3s ease;
        }
        
        h2,
        h3,
        p {
            color: var(--text);
        }
        
        .btn {
            background: var(--blue);
            color: white;
            padding: 0.7rem 1.4rem;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            margin: 0.3rem;
            font-size: 1rem;
            font-weight: 500;
            transition: 0.2s;
        }
        
        .btn:hover {
            background: #1d4ed8;
        }
        
        .option {
            border: 2px solid #e5e7eb;
            padding: 1rem;
            border-radius: 12px;
            margin: 0.5rem 0;
            cursor: pointer;
            transition: 0.2s;
        }
        
        .option:hover {
            background: #f9fafb;
            border-color: var(--blue);
        }
        
        .correct {
            background: #d1fae5 !important;
            border-color: #10b981 !important;
        }
        
        .wrong {
            background: #fee2e2 !important;
            border-color: #ef4444 !important;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        
        th,
        td {
            border: 1px solid #e5e7eb;
            padding: 0.6rem;
            text-align: center;
        }
        
        th {
            background: #f3f4f6;
        }
    </style>
</head>

<body>
    <!-- üîπ Navbar -->
    <header>
        <div class="logo">üìò TCAS Practice</div>
        <nav>
            <a href="#" onclick="goHome()">‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
            <a href="#" onclick="goIntro()">‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</a>
            <a href="#" onclick="backToMenu()">‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î</a>
            <a href="#" onclick="goStats()">‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</a>
            <a href="#" onclick="goAccount()">‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</a>
        </nav>
    </header>

    <main id="app">
        <div class="card">
            <h2>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∏‡∏î‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö</h2>
            <div id="exam-menu"></div>
        </div>
    </main>

    <!-- ‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö‡∏à‡∏£‡∏¥‡∏á -->
    <script src="examData_full.js"></script>

    <script>
        const examList = Object.keys(examData);
        const menu = document.getElementById("exam-menu");
        menu.innerHTML = examList.map(e =>
            `<button class="btn" onclick="startExam('${e}')">${e}</button>`
        ).join("");

        let questions = [];
        let qIndex = 0,
            score = 0,
            currentExam = "";

        function startExam(examName) {
            currentExam = examName;
            questions = examData[examName];
            qIndex = 0;
            score = 0;
            renderQuestion();
        }

        function renderQuestion() {
            const q = questions[qIndex];
            document.getElementById("app").innerHTML = `
        <div class="card">
          <h3>${currentExam} | ‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà ${qIndex+1}/${questions.length}</h3>
          <p>${q.stem}</p>
          <div>
            ${q.choices.map((c,i)=>`<div class="option" onclick="answer(${i})">${c}</div>`).join("")}
          </div>
        </div>`;
    }

    function answer(i) {
      const q = questions[qIndex];
      const opts = document.querySelectorAll(".option");
      opts.forEach((opt,idx)=>{
        if(idx===q.answer) opt.classList.add("correct");
        else if(idx===i) opt.classList.add("wrong");
        opt.onclick=null;
      });
      if(i===q.answer) score++;
      setTimeout(()=>{
        qIndex++;
        if(qIndex < questions.length) renderQuestion();
        else showResult();
      }, 1000);
    }

    function showResult() {
      const percent = ((score/questions.length)*100).toFixed(1);
      // üîπ ‡πÄ‡∏Å‡πá‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÉ‡∏ô localStorage
      saveResult(currentExam, score, questions.length, percent);
      document.getElementById("app").innerHTML = `
        <div class="card">
          <h2>‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå - ${currentExam}</h2>
          <p>‡∏ñ‡∏π‡∏Å ${score} ‡∏à‡∏≤‡∏Å ${questions.length} ‡∏Ç‡πâ‡∏≠ (${percent}%)</p>
          <button class="btn" onclick="backToMenu()">‚¨Ö ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π</button>
        </div>`;
    }

    function backToMenu() {
      document.getElementById("app").innerHTML = `
        <div class="card">
          <h2>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∏‡∏î‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö</h2>
          <div id="exam-menu">
            ${examList.map(e => `<button class="btn" onclick="startExam('${e}')">${e}</button>`).join("")}
          </div>
        </div>`;
    }

    // üîπ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
    function saveResult(exam, score, total, percent) {
      const record = {
        exam, score, total, percent,
        date: new Date().toLocaleString("th-TH")
      };
      let stats = JSON.parse(localStorage.getItem("examStats") || "[]");
      stats.push(record);
      localStorage.setItem("examStats", JSON.stringify(stats));
    }

    // üîπ ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
    function goStats() {
      const stats = JSON.parse(localStorage.getItem("examStats") || "[]");
      if (stats.length === 0) {
        document.getElementById("app").innerHTML = `
          <div class="card"><h2>üìä ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</h2><p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö</p></div>`;
        return;
      }
      document.getElementById("app").innerHTML = `
        <div class="card">
          <h2>üìä ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö</h2>
          <table>
            <tr><th>‡∏ä‡∏∏‡∏î‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö</th><th>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</th><th>‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå</th><th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥</th></tr>
            ${stats.map(r=>`
              <tr>
                <td>${r.exam}</td>
                <td>${r.score}/${r.total}</td>
                <td>${r.percent}%</td>
                <td>${r.date}</td>
              </tr>`).join("")}
          </table>
          <button class="btn" onclick="clearStats()">‡∏•‡πâ‡∏≤‡∏á‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</button>
        </div>`;
    }

    function clearStats() {
      localStorage.removeItem("examStats");
      goStats();
    }

    // üîπ Navbar
    function goHome() {
      document.getElementById("app").innerHTML = `
        <div class="card">
          <h2>üè† ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</h2>
          <p><b>TCAS</b> ‡∏´‡∏£‡∏∑‡∏≠ <b>Thai University Central Admission System</b> 
          ‡∏Ñ‡∏∑‡∏≠‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏•‡∏≤‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏±‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡πÄ‡∏Ç‡πâ‡∏≤‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ï‡πà‡∏≠‡πÉ‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏≠‡∏∏‡∏î‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤</p>
        </div>`;
    }
    function goIntro() {
      document.getElementById("app").innerHTML = `
        <div class="card">
          <h2>‚ÑπÔ∏è ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h2>
          <p>‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏£‡∏∞‡∏ö‡∏ö TCAS:</p>
          <div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;border-radius:12px;">
            <iframe src="https://www.youtube.com/embed/vkKaRAZ-u8E"
              frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              allowfullscreen
              style="position:absolute;top:0;left:0;width:100%;height:100%;">
            </iframe>
          </div>
        </div>`;
    }

    // üîπ Account (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°)
    function saveAccount(name, imgUrl) {
      localStorage.setItem("userName", name);
      localStorage.setItem("userImg", imgUrl);
    }
    function loadAccount() {
      return { name: localStorage.getItem("userName")||"", img: localStorage.getItem("userImg")||"" };
    }
    function goAccount() {
      const user = loadAccount();
      if (user.name && user.img) {
        document.getElementById("app").innerHTML = `
          <div class="card" style="text-align:center">
            <img src="${user.img}" style="width:100px;height:100px;border-radius:50%;object-fit:cover;margin-bottom:1rem;">
            <h2>üë§ ${user.name}</h2>
            <button class="btn" onclick="logout()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
          </div>`;
      } else {
        document.getElementById("app").innerHTML = `
          <div class="card" style="text-align:center">
            <h2>üë§ ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</h2>
            <input type="text" id="nameInput" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠" style="padding:0.5rem;width:80%;margin:0.5rem 0;">
            <input type="file" id="imgInput" accept="image/*" style="margin:0.5rem 0;">
            <br><button class="btn" onclick="saveProfile()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
          </div>`;
      }
    }
    function saveProfile() {
      const name = document.getElementById("nameInput").value;
      const file = document.getElementById("imgInput").files[0];
      if (!name || !file) { alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ"); return; }
      const reader = new FileReader();
      reader.onload = e => { saveAccount(name, e.target.result); goAccount(); };
      reader.readAsDataURL(file);
    }
    function logout() { localStorage.removeItem("userName"); localStorage.removeItem("userImg"); goAccount(); }
    </script>
</body>

</html>